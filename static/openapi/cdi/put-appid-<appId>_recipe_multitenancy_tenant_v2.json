{
  "path": "/appid-<appId>/recipe/multitenancy/tenant/v2",
  "method": "put",
  "description": "Creates or updates a tenant.\n\nSuperTokens subscription license key is required.\n\nThe `firstFactors` can be set to following values:\n\n- `null`: When set to `null`, all the login methods will be available for the tenant.\n- `[]` (empty array): No login methods will be enabled for the tenant.\n- `['factor1', 'factor2', ...]` (non-empty array): The list of login methods to enable for the tenant. For eg. if this is set to `['emailpassword', 'thirdparty']`, the users of the tenant will be able to login using emailpassword and third party providers.\n\nList of built-in first factors are as follows:\n\n- Email password auth: `emailpassword`\n- Social login / enterprise SSO auth: `thirdparty`\n- Passwordless:\n  - With email OTP: `otp-email`\n  - With SMS OTP: `otp-phone`\n  - With email magic link: `link-email`\n  - With SMS magic link: `link-phone`\n\nIf first factors are not specified while creating a new tenant, all the login methods will be disabled by default.\n\nThe `requiredSecondaryFactors` can be set to following values:\n- `null`: When set to `null`, no secondary factors will be required for the users of the tenant.\n- `['factor1', 'factor2', ...]` (non-empty array): The list of factors that the users of the tenant must complete post the first factor login. For eg. if this is set to `['otp-phone', 'totp']`, the users of the tenant will be required to complete either phone OTP or TOTP post the first factor login.\n\nList of built-in secondary factors are as follows:\n\n- Email password auth: `emailpassword`\n- Social login / enterprise SSO auth: `thirdparty`\n- Passwordless:\n  - With email OTP: `otp-email`\n  - With SMS OTP: `otp-phone`\n  - With email magic link: `link-email`\n  - With SMS magic link: `link-phone`\n- Time based OTP: `totp`\n\nIf updating an existing tenant,\n1. core will keep the existing state of login methods and only update the ones that are specified in the request body.\n2. Core config will be merged into existing config. To delete a key in the config, use a null value\n\nThe request must originate from public tenant, and the new tenant will use connectionUriDomain and app from which the request originates.\n\nNote: Updation of core config is not allowed for the default connectionUriDomain, public app and tenant. In order to update config for the default connectionUriDomain, public app and tenant, you must edit the config.yaml or the docker env directly.\n",
  "parameters": {
    "rid": {
      "name": "rid",
      "in": "header",
      "example": "multitenancy",
      "required": false,
      "schema": {
        "type": "string"
      }
    },
    "Authorization": {
      "name": "Authorization",
      "in": "header",
      "example": "ajs30Nlbs0DjvsdFIne934n8NVee5n",
      "required": false,
      "schema": {
        "type": "string"
      }
    },
    "cdi-version": {
      "name": "cdi-version",
      "in": "header",
      "description": "X.Y of the X.Y.Z CDI version.",
      "example": "5.1",
      "schema": {
        "type": "string"
      }
    }
  },
  "body": {
    "schema": {
      "application/json": {
        "type": "object",
        "required": [
          "tenantId"
        ],
        "properties": {
          "tenantId": {
            "type": "string",
            "example": "customer1"
          },
          "firstFactors": {
            "type": "array",
            "items": {
              "type": "string",
              "example": "emailpassword"
            }
          },
          "requiredSecondaryFactors": {
            "type": "array",
            "items": {
              "type": "string",
              "example": "otp-phone"
            }
          },
          "coreConfig": {
            "type": "dictionary"
          }
        }
      }
    }
  },
  "responses": {
    "200": {
      "description": "Create or Update tenant result",
      "content": {
        "application/json": {
          "schema": {
            "type": "object",
            "required": [
              "status",
              "createdNew"
            ],
            "properties": {
              "status": {
                "type": "string",
                "enum": [
                  "OK"
                ]
              },
              "createdNew": {
                "type": "boolean"
              }
            }
          }
        }
      }
    },
    "400": {
      "description": "error code 400",
      "content": {
        "text/plain": {
          "schema": {
            "type": "string"
          }
        }
      }
    },
    "401": {
      "description": "error code 401",
      "content": {
        "text/plain": {
          "schema": {
            "type": "string",
            "enum": [
              "Invalid API key"
            ]
          }
        }
      }
    },
    "402": {
      "description": "error code 402",
      "content": {
        "text/plain": {
          "schema": {
            "type": "string",
            "enum": [
              "License Error"
            ]
          }
        }
      }
    },
    "404": {
      "description": "error code 404",
      "content": {
        "text/plain": {
          "schema": {
            "type": "string",
            "enum": [
              "Not Found"
            ]
          }
        }
      }
    },
    "500": {
      "description": "error code 500",
      "content": {
        "text/plain": {
          "schema": {
            "type": "string",
            "enum": [
              "Internal Error"
            ]
          }
        }
      }
    }
  }
}