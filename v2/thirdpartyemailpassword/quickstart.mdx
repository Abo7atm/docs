---
id: quickstart 
title: Quickstart
hide_title: true
show_ui_switcher: false 
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

import PreBuiltUIInjector from "/src/components/prebuiltuiInjector"
import BackendSDKTabs from "/src/components/tabs/BackendSDKTabs";
import FrontendPreBuiltUITabs from "/src/components/tabs/FrontendPreBuiltUITabs"
import {Question, Answer}from "/src/components/question"
import RRDVersionSubTabs from "/src/components/tabs/RRDVersionSubTabs"
import AppInfoForm from "/src/components/appInfoForm"
import NodeJSFrameworkSubTabsServerless from "/src/components/tabs/NodeJSFrameworkSubTabsServerless"
import CoreInjector from "/src/components/coreInjector"
import PythonFrameworkSubTabs from "/src/components/tabs/PythonFrameworkSubTabs"
import GoFrameworkSubTabs from "/src/components/tabs/GoFrameworkSubTabs"
import BackendSDKCasing from "/src/components/BackendSDKCasing"

import FrontendSDKInstall from "../community/reusableMD/frontend-sdk-install.mdx"

# Quickstart 

## Overview 

This quickstart will guide you through how to set up a basic project that uses **SuperTokens** to authenticate users.
The tutorial shows a **Email/Password** flow, rendered by our **Prebuilt UI components**. 


<!-- COPY SECTION -->
<!-- ./emailpassword/quickstart.mdx -->
<!-- 1 -->

If you want to skip straight to an example application you can choose between:
- Checking our live [demo application](https://^{docsLinkRecipeName}.demo.supertokens.com/auth)
- Running a **SuperTokens** project from your local machine. You just have to use our CLI app and execute the following command:

```bash
npx create-supertokens-app@latest --recipe=^{docsLinkRecipeName}
```

<!-- END COPY SECTION -->

## Before you start

<!-- COPY SECTION -->
<!-- ./emailpassword/quickstart.mdx -->
<!-- 2 -->

Before going into the actual tutorial, let's get a clear picture of how **SuperTokens** works and some of the terms that we will use throughout the documentation.

### SuperTokens Core

The main service that provides all the functionality is called the **SuperTokens Core**. SDKs communicate over an API with this service in order to 
perform authentication related tasks.

Unlike with other providers, the **SuperTokens Frontend SDK** never talks to the **Authentication Service** directly.
All the requests target your existing **Backend Service**.
From there, the **Backend SDKs** are used to expose new authentication routes. Those in turn communicate with the **SuperTokens Core**.

You can check the following diagram for a high level overview of how the services will interact within an authentication setup that involves **SuperTokens**.

<Tabs
  defaultValue="ms"
  values={[
    {label: 'Managed service', value: 'ms'},
    {label: 'Self hosted', value: 'ss'},
  ]}
>
  <TabItem value="ms">
    <img src="/img/architecture/managed_service_without_dashboard.png" alt="Flowchart of architecture when using SuperTokens managed service" />
  </TabItem>
  <TabItem value="ss">
    <img src="/img/architecture/self_hosted_without_dashboard.png" alt="Flowchart of architecture when self-hosting SuperTokens" />
  </TabItem>
</Tabs>

:::info Edge Cases
- You can also host the **SuperTokens Core** yourself. In that case your backend will communicate with a service that exists inside your infrastructure.
- If you are using a backend for which we do not have an SDK, you will have to spin up an additional auth service in a language for which we do have a backend SDK (NodeJS, Python or Golang).
:::


### Recipes

The functionalities that **SuperTokens** provides are bundled into objects that can be reffered to as **Recipes**.
Everything from *authentication methods* to *session and user management* can be included under this concept.
In the following sections, we will see how recipes get initialised and configured and how you can customise them to fit your use case.

<!-- END COPY SECTION -->

## Part 1: Frontend Setup

Start the setup by configuring the frontend application to use **SuperTokens** for authentication.

### 1. Install the SDK

<!-- COPY SECTION -->
<!-- ./emailpassword/quickstart.mdx -->
<!-- 3 -->

Run the following command in your terminal to install the package.

<FrontendSDKInstall />

<!-- END COPY SECTION -->

### 2. Initialize the SDK 


<FrontendPreBuiltUITabs showMobileTab>
  <TabItem value="reactjs">

<AppInfoForm
    askForAppName
    askForAPIDomain
    askForWebsiteDomain
>

<!-- COPY SECTION -->
<!-- ./emailpassword/quickstart.mdx -->
<!-- react-init -->

In your main application file call the `SuperTokens.init` function to initialize the SDK.
The `init` call includes the [main configuration details](./appinfo), as well as the **recipes** that you will be using in your setup.
After that you will have to wrap the application with the `SuperTokensWrapper` component.
This will provide authentication context for the rest of the components in the render tree.

<!-- END COPY SECTION -->


```tsx
import React from 'react';

import SuperTokens, { SuperTokensWrapper } from "supertokens-auth-react";
import ThirdParty, { Github, Google, Facebook, Apple } from "supertokens-auth-react/recipe/thirdparty";
import EmailPassword from "supertokens-auth-react/recipe/emailpassword";
import Session from "supertokens-auth-react/recipe/session";

// highlight-start
SuperTokens.init({
    appInfo: {
        // learn more about this on https://supertokens.com/docs/thirdpartyemailpassword/appinfo
        appName: "^{form_appName}",
        apiDomain: "^{form_apiDomain}",
        websiteDomain: "^{form_websiteDomain}",
        apiBasePath: "^{form_apiBasePath}",
        websiteBasePath: "^{form_websiteBasePath}"
    },
    recipeList: [
        ThirdParty.init({
            signInAndUpFeature: {
                providers: [
                    Github.init(),
                    Google.init(),
                    Facebook.init(),
                    Apple.init(),
                ]
            }
        }),
        EmailPassword.init(),
        Session.init()
    ]
});
// highlight-end


/* Your App */
class App extends React.Component {
    render() {
        return (
            // highlight-next-line
            <SuperTokensWrapper>
                {/*Your app components*/}
            // highlight-next-line
            </SuperTokensWrapper>
        );
    }
}
```

</AppInfoForm>

</TabItem>

<TabItem value="angular">

<AppInfoForm 
    askForAppName
    askForAPIDomain
    askForWebsiteDomain>

<PreBuiltUIInjector>

Before we initialize the `supertokens-web-js` SDK let's see how we will use it in our Angular app

**Architecture**

- The `supertokens-web-js` SDK is responsible for session management and providing helper functions to check if a session exists, or validate the access token claims on the frontend (for example, to check for user roles before showing some UI). We will initialise this SDK on the root of your Angular app, so that all pages in your app can use it.
- We will create a `^{form_websiteBasePath}*` route in the Angular app which will render our pre built UI which will also need to be initialised, but only on that route.

**Creating the `^{form_websiteBasePath}` route**

- Use the Angular CLI to generate a new route

    ```bash
    ng generate module auth --route auth --module app.module
    ```

- Add the following code to your `auth` angular component

    ```tsx title="/app/auth/auth.component.ts"
    import {init as supertokensUIInit} from "supertokens-auth-react-script";
    import supertokensUIEmailPassword from "supertokens-auth-react-script/recipe/emailpassword";
    import supertokensUIThirdParty from "supertokens-auth-react-script/recipe/thirdparty";
    import supertokensUISession from "supertokens-auth-react-script/recipe/session";
    import { Component, OnDestroy, AfterViewInit, Renderer2, Inject } from "@angular/core";
    import { DOCUMENT } from "@angular/common";

    @Component({
        selector: "app-auth",
        template: '<div id="supertokensui"></div>',
    })
    export class AuthComponent implements OnDestroy, AfterViewInit {

        constructor(
            private renderer: Renderer2,
            @Inject(DOCUMENT) private document: Document
        ) { }

        ngAfterViewInit() {
            this.loadScript('^{jsdeliver_prebuiltui}');
        }

        ngOnDestroy() {
            // Remove the script when the component is destroyed
            const script = this.document.getElementById('supertokens-script');
            if (script) {
                script.remove();
            }
        }

        private loadScript(src: string) {
            const script = this.renderer.createElement('script');
            script.type = 'text/javascript';
            script.src = src;
            script.id = 'supertokens-script';
            script.onload = () => {
                supertokensUIInit({
                    appInfo: {
                        appName: "^{form_appName}",
                        apiDomain: "^{form_apiDomain}",
                        websiteDomain: "^{form_websiteDomain}",
                        apiBasePath: "^{form_apiBasePath}",
                        websiteBasePath: "^{form_websiteBasePath}"
                    },
                    recipeList: [
                        supertokensUIEmailPassword.init(),
                        supertokensUIThirdParty.init({
                            signInAndUpFeature: {
                                providers: [
                                    supertokensUIThirdParty.Github.init(),
                                    supertokensUIThirdParty.Google.init(),
                                    supertokensUIThirdParty.Facebook.init(),
                                    supertokensUIThirdParty.Apple.init(),
                                ]
                            }
                        }),
                        supertokensUISession.init(),
                    ],
                });
            }
            this.renderer.appendChild(this.document.body, script);
        }
    }
    ```
    - In the `loadScript` function, we provide the SuperTokens config for the UI. We add the emailpassword, session and social login recipes along with Github, Google, Facebook and Apple login buttons. 

- Initialize the `supertokens-web-js` SDK in your angular app's root component. This will provide session management across your entire application.

    ```tsx title="/app/app.component.ts "   
    import SuperTokens from "supertokens-web-js";
    import Session from "supertokens-web-js/recipe/session";
    
    SuperTokens.init({
        appInfo: {
            appName: "^{form_appName}",
            apiDomain: "^{form_apiDomain}",
            apiBasePath: "^{form_apiBasePath}",
        },
        recipeList: [
            Session.init(),
        ],
    });
    ```

</PreBuiltUIInjector>

</AppInfoForm>

</TabItem>

<TabItem value="vue">

<AppInfoForm 
    askForAppName
    askForAPIDomain
    askForWebsiteDomain>

<PreBuiltUIInjector>

Before we initialize the `supertokens-web-js` SDK let's see how we will use it in our Vue app

**Architecture**

- The `supertokens-web-js` SDK is responsible for session management and providing helper functions to check if a session exists, or validate the access token claims on the frontend (for example, to check for user roles before showing some UI). We will initialise this SDK on the root of your Vue app, so that all pages in your app can use it.
- We will create a `^{form_websiteBasePath}*` route in the Vue app which will render our pre built UI which will also need to be initialised, but only on that route.

**Creating the `^{form_websiteBasePath}` route**

- Create a new file `AuthView.vue`, this Vue component will be used to render the auth component:
    ```tsx
    import {init as supertokensUIInit} from "supertokens-auth-react-script";
    import supertokensUIThirdParty from "supertokens-auth-react-script/recipe/thirdparty";
    import supertokensUIEmailPassword from "supertokens-auth-react-script/recipe/emailpassword";
    import supertokensUISession from "supertokens-auth-react-script/recipe/session";
    <script lang="ts">
        import { defineComponent, onMounted, onUnmounted } from 'vue';
        export default defineComponent({
            setup() {
                const loadScript = (src: string) => {
                    const script = document.createElement('script');
                    script.type = 'text/javascript';
                    script.src = src;
                    script.id = 'supertokens-script';
                    script.onload = () => {
                        supertokensUIInit({
                            appInfo: {
                                appName: "^{form_appName}",
                                apiDomain: "^{form_apiDomain}",
                                websiteDomain: "^{form_websiteDomain}",
                                apiBasePath: "^{form_apiBasePath}",
                                websiteBasePath: "^{form_websiteBasePath}"
                            },
                            recipeList: [
                                supertokensUIEmailPassword.init(),
                                supertokensUIThirdParty.init({
                                    signInAndUpFeature: {
                                        providers: [
                                            supertokensUIThirdParty.Github.init(),
                                            supertokensUIThirdParty.Google.init(),
                                            supertokensUIThirdParty.Facebook.init(),
                                            supertokensUIThirdParty.Apple.init(),
                                        ]
                                    }
                                }),
                                supertokensUISession.init(),
                            ],
                        });
                    };
                    document.body.appendChild(script);
                };

                onMounted(() => {
                    loadScript('^{jsdeliver_prebuiltui}');
                });

                onUnmounted(() => {
                    const script = document.getElementById('supertokens-script');
                    if (script) {
                        script.remove();
                    }
                });
            },
        });
    </script>

    <template>
        <div id="supertokensui" />
    </template>
    ```
    - In the `loadScript` function, we provide the SuperTokens config for the UI. We add the emailpassword, session and social login recipes along with Github, Google, Facebook and Apple login buttons. 

- Initialize the `supertokens-web-js` SDK in your Vue app's `main.ts` file. This will provide session management across your entire application.

    ```tsx title="/main.ts "
    // @ts-ignore
    import { createApp } from "vue";
    import SuperTokens from "supertokens-web-js";
    import Session from "supertokens-web-js/recipe/session";
    // @ts-ignore
    import App from "./App.vue";
    // @ts-ignore
    import router from "./router";

    SuperTokens.init({
        appInfo: {
            appName: "^{form_appName}",
            apiDomain: "^{form_apiDomain}",
            apiBasePath: "^{form_apiBasePath}",
        },
        recipeList: [
            Session.init(),
        ],
    });

    const app = createApp(App);

    app.use(router);

    app.mount("#app");

    ```

</PreBuiltUIInjector>

</AppInfoForm>

</TabItem>

<TabItem value="mobile">

:::important
SuperTokens does not support pre-built UI for mobile frameworks. Please refer to the [setup guide for custom UI](../../custom-ui/init/frontend) to integrate SuperTokens in your app.
:::

</TabItem>

</FrontendPreBuiltUITabs>

### 3. Configure Routing 

<!-- COPY SECTION -->
<!-- ./emailpassword/quickstart.mdx -->
<!-- 4 -->

<FrontendPreBuiltUITabs showMobileTab>
  <TabItem value="reactjs">

In order for the **Pre Built UI** to be rendered inside your application, will will have to specify which routes will show the authentication components.
The **React SDK** uses [**React Router**](https://reactrouter.com/en/main) under the hood to achieve this.
Based on whether you already use this package or not in your project, there are two different ways of configuring the routes.

<AppInfoForm askForWebsiteBasePath>
<Question question="Do you use react-router-dom?" defaultAnswer="Yes">
<Answer title="Yes">

<RRDVersionSubTabs>

<TabItem value="v6">

Call the `getSuperTokensRoutesForReactRouterDom` method from within any `react-router-dom` `Routes` component.

```tsx
import React from 'react';
import {
  BrowserRouter,
  Routes,
  Route,
  Link
} from "react-router-dom";

// highlight-next-line
import SuperTokens, { SuperTokensWrapper } from "supertokens-auth-react";
import { getSuperTokensRoutesForReactRouterDom } from "supertokens-auth-react/ui";
^{prebuiltuiimport}
import * as reactRouterDom from "react-router-dom";

class App extends React.Component {
    render() {
        return (
            <SuperTokensWrapper>
                <BrowserRouter>
                    <Routes>
                        {/*This renders the login UI on the ^{form_websiteBasePath} route*/}
                        // highlight-next-line
                        {getSuperTokensRoutesForReactRouterDom(reactRouterDom, [^{recipePreBuiltUINameCapitalLetters}])}
                        {/*Your app routes*/}
                    </Routes>
                </BrowserRouter>
            </SuperTokensWrapper>
        );
    }
}
```

</TabItem>

<TabItem value="v5">

Call the `getSuperTokensRoutesForReactRouterDom` method from within any `react-router-dom` `Switch` component.

```tsx
import React from 'react';
import {
    BrowserRouter,
    Switch,
    Route,
    Link
} from "react-router-dom5";

// highlight-next-line
import SuperTokens, { SuperTokensWrapper } from "supertokens-auth-react";
import { getSuperTokensRoutesForReactRouterDom } from "supertokens-auth-react/ui";
^{prebuiltuiimport}
import * as reactRouterDom from "react-router-dom";


class App extends React.Component {
    render() {
        return (
            <SuperTokensWrapper>
                <BrowserRouter>
                    <Switch>
                        {/*This renders the login UI on the ^{form_websiteBasePath} route*/}
                        // highlight-next-line
                        {getSuperTokensRoutesForReactRouterDom(reactRouterDom, [^{recipePreBuiltUINameCapitalLetters}])}
                        {/*Your app routes*/}
                    </Switch>
                </BrowserRouter>
            </SuperTokensWrapper>
        );
    }
}
```

</TabItem>

</RRDVersionSubTabs>

</Answer>
<Answer title="No">

Add the highlighted code snippet to your root level `render` function.

```tsx
import React from 'react';
^{prebuiltuiimport}
import SuperTokens, { SuperTokensWrapper } from "supertokens-auth-react";
import { canHandleRoute, getRoutingComponent } from "supertokens-auth-react/ui";

class App extends React.Component {
    render() {
        // highlight-start
        if (canHandleRoute([^{recipePreBuiltUINameCapitalLetters}])) {
            // This renders the login UI on the ^{form_websiteBasePath} route
            return getRoutingComponent([^{recipePreBuiltUINameCapitalLetters}])
        }
        // highlight-end

        return (
            <SuperTokensWrapper>{/*Your app*/}</SuperTokensWrapper>
        );
    }

}
```

</Answer>
</Question>
</AppInfoForm>
</TabItem>

<TabItem value="angular">

<AppInfoForm 
    askForWebsiteDomain>

Update your angular router so that all auth related requests load the `auth` component

```tsx title="/app/app-routing.module.ts"
import { NgModule } from "@angular/core";
import { RouterModule, Routes } from "@angular/router";

const routes: Routes = [
    // highlight-start
    {
        path: "^{form_websiteBasePath_withoutForwardSlash}",
        // @ts-ignore
        loadChildren: () => import("./auth/auth.module").then((m) => m.AuthModule),
    },

    // @ts-ignore
    { path: "**", loadChildren: () => import("./home/home.module").then((m) => m.HomeModule) },
    // highlight-end
];

@NgModule({
    imports: [RouterModule.forRoot(routes)],
    exports: [RouterModule],
})
export class AppRoutingModule {}
```
</AppInfoForm>

</TabItem>

<TabItem value="vue">

<AppInfoForm 
    askForWebsiteDomain>

Update your Vue router so that all auth related requests load the `AuthView` component

```tsx title="/router/index.ts"
// @ts-ignore
import { createRouter, createWebHistory } from "vue-router";
// @ts-ignore
import HomeView from "../views/HomeView.vue";
// @ts-ignore
import AuthView from "../views/AuthView.vue";

const router = createRouter({
    // @ts-ignore
    history: createWebHistory(import.meta.env.BASE_URL),
    routes: [
        {
            path: "/",
            name: "home",
            component: HomeView,
        },
        {
            path: "^{form_websiteBasePath}/:pathMatch(.*)*",
            name: "auth",
            component: AuthView,
        },
    ],
});

export default router;
```

</AppInfoForm>

</TabItem>

<TabItem value="mobile">

:::important
SuperTokens does not support pre-built UI for mobile frameworks. Please refer to the [setup guide for custom UI](../../custom-ui/init/frontend) to integrate SuperTokens in your app.
:::

</TabItem>

</FrontendPreBuiltUITabs>

<!-- END COPY SECTION -->

### 4. Handle Session Tokens

<!-- COPY SECTION -->
<!-- ./emailpassword/quickstart.mdx -->
<!-- 5 -->

This part is handled automatically by the **Frontend SDK**. 
You don not need to do anything. 
The step serves more as a way for us to tell you how is this handled under the hood.

After you call the `init` function, the **SDK** will add interceptors to both `fetch` and `XHR`, XMLHTTPRequest. The latter is used by the `axios` library.
The interceptors save the session tokens that are generated from the authentication flow.
Those tokens are then added to requests initialized by your frontend app which target the backend API.
By default, the tokens are stored through session cookies but you can also switch to [header based authentication](/common-customizations/sessions/token-transfer-method).

<!-- END COPY SECTION -->


## Part 2: Backend Setup

Now let's got through the changes required so that your backend can expose the **SuperTokens** authentication features.

### 1. Install the SDK

<!-- COPY SECTION -->
<!-- ./emailpassword/quickstart.mdx -->
<!-- 6 -->

Run the following command in your terminal to install the package.

<BackendSDKTabs>
<TabItem value="nodejs">

```bash
npm i -s supertokens-node
```

</TabItem>
<TabItem value="go">

```bash
go get github.com/supertokens/supertokens-golang
```

</TabItem>
<TabItem value="python">

```bash
pip install supertokens-python
```

</TabItem>
</BackendSDKTabs>

<!-- END COPY SECTION -->

### 2. Initialize the SDK

You will have to intialize the **Backend SDK** alongside the code that starts your server.
The init call will include [configuration details](./appinfo) for your app, how the backend will connect to the **SuperTokens Core**, as well as the **Recipes** that will be used in your setup.

<AppInfoForm
    askForAppName
    askForAPIDomain
    askForWebsiteDomain
>

<CoreInjector showTenantId={false}>

Add the code below to your server's init file.

<BackendSDKTabs>
<TabItem value="nodejs">

<NodeJSFrameworkSubTabsServerless>
<TabItem value="express">

```tsx
import supertokens from "supertokens-node";
import Session from "supertokens-node/recipe/session";
import EmailPassword from"supertokens-node/recipe/emailpassword";
import ThirdParty from"supertokens-node/recipe/thirdparty";

supertokens.init({
    framework: "express",
    supertokens: {
        ^{coreInjector_connection_uri_comment}
        connectionURI: ^{coreInjector_uri}
        ^{coreInjector_api_key_commented}apiKey: ^{coreInjector_api_key},
    },
    appInfo: {
        // learn more about this on https://supertokens.com/docs/thirdpartyemailpassword/appinfo
        appName: "^{form_appName}",
        apiDomain: "^{form_apiDomain}",
        websiteDomain: "^{form_websiteDomain}",
        apiBasePath: "^{form_apiBasePath}",
        websiteBasePath: "^{form_websiteBasePath}"
    },
    recipeList: [
        EmailPassword.init(),
        ThirdParty.init({/*TODO: See next step*/}),
        Session.init() // initializes session features
    ]
});
```
</TabItem>

<TabItem value="hapi">

```tsx
import supertokens from "supertokens-node";
import Session from "supertokens-node/recipe/session";
import EmailPassword from"supertokens-node/recipe/emailpassword";
import ThirdParty from"supertokens-node/recipe/thirdparty";

supertokens.init({
    framework: "hapi",
    supertokens: {
        ^{coreInjector_connection_uri_comment}
        connectionURI: ^{coreInjector_uri}
        ^{coreInjector_api_key_commented}apiKey: ^{coreInjector_api_key},
    },
    appInfo: {
        // learn more about this on https://supertokens.com/docs/session/appinfo
        appName: "^{form_appName}",
        apiDomain: "^{form_apiDomain}",
        websiteDomain: "^{form_websiteDomain}",
        apiBasePath: "^{form_apiBasePath}",
        websiteBasePath: "^{form_websiteBasePath}"
    },
    recipeList: [
        EmailPassword.init(),
        ThirdParty.init({/*TODO: See next step*/}),
        Session.init() // initializes session features
    ]
});
```
</TabItem>

<TabItem value="fastify">

```tsx
import supertokens from "supertokens-node";
import Session from "supertokens-node/recipe/session";
import EmailPassword from"supertokens-node/recipe/emailpassword";
import ThirdParty from"supertokens-node/recipe/thirdparty";

supertokens.init({
    framework: "fastify",
    supertokens: {
        ^{coreInjector_connection_uri_comment}
        connectionURI: ^{coreInjector_uri}
        ^{coreInjector_api_key_commented}apiKey: ^{coreInjector_api_key},
    },
    appInfo: {
        // learn more about this on https://supertokens.com/docs/session/appinfo
        appName: "^{form_appName}",
        apiDomain: "^{form_apiDomain}",
        websiteDomain: "^{form_websiteDomain}",
        apiBasePath: "^{form_apiBasePath}",
        websiteBasePath: "^{form_websiteBasePath}"
    },
    recipeList: [
        EmailPassword.init(),
        ThirdParty.init({/*TODO: See next step*/}),
        Session.init() // initializes session features
    ]
});
```
</TabItem>

<TabItem value="koa">

```tsx
import supertokens from "supertokens-node";
import Session from "supertokens-node/recipe/session";
import EmailPassword from"supertokens-node/recipe/emailpassword";
import ThirdParty from"supertokens-node/recipe/thirdparty";

supertokens.init({
    framework: "koa",
    supertokens: {
        ^{coreInjector_connection_uri_comment}
        connectionURI: ^{coreInjector_uri}
        ^{coreInjector_api_key_commented}apiKey: ^{coreInjector_api_key},
    },
    appInfo: {
        // learn more about this on https://supertokens.com/docs/session/appinfo
        appName: "^{form_appName}",
        apiDomain: "^{form_apiDomain}",
        websiteDomain: "^{form_websiteDomain}",
        apiBasePath: "^{form_apiBasePath}",
        websiteBasePath: "^{form_websiteBasePath}"
    },
    recipeList: [
        EmailPassword.init(),
        ThirdParty.init({/*TODO: See next step*/}),
        Session.init() // initializes session features
    ]
});
```
</TabItem>

<TabItem value="loopback">

```tsx
import supertokens from "supertokens-node";
import Session from "supertokens-node/recipe/session";
import EmailPassword from"supertokens-node/recipe/emailpassword";
import ThirdParty from"supertokens-node/recipe/thirdparty";

supertokens.init({
    framework: "loopback",
    supertokens: {
        ^{coreInjector_connection_uri_comment}
        connectionURI: ^{coreInjector_uri}
        ^{coreInjector_api_key_commented}apiKey: ^{coreInjector_api_key},
    },
    appInfo: {
        // learn more about this on https://supertokens.com/docs/session/appinfo
        appName: "^{form_appName}",
        apiDomain: "^{form_apiDomain}",
        websiteDomain: "^{form_websiteDomain}",
        apiBasePath: "^{form_apiBasePath}",
        websiteBasePath: "^{form_websiteBasePath}"
    },
    recipeList: [
        EmailPassword.init(),
        ThirdParty.init({/*TODO: See next step*/}),
        Session.init() // initializes session features
    ]
});
```
</TabItem>
</NodeJSFrameworkSubTabsServerless>
</TabItem>
<TabItem value="go">

```go
import (
	"github.com/supertokens/supertokens-golang/recipe/emailpassword"
	"github.com/supertokens/supertokens-golang/recipe/session"
	"github.com/supertokens/supertokens-golang/recipe/thirdparty"
	"github.com/supertokens/supertokens-golang/recipe/thirdparty/tpmodels"
	"github.com/supertokens/supertokens-golang/supertokens"
)

func main() {
    apiBasePath := "^{form_apiBasePath}"
    websiteBasePath := "^{form_websiteBasePath}"
	err := supertokens.Init(supertokens.TypeInput{
		Supertokens: &supertokens.ConnectionInfo{
            ^{coreInjector_connection_uri_comment}
            ConnectionURI: ^{coreInjector_uri}
            ^{coreInjector_api_key_commented}APIKey: ^{coreInjector_api_key},
		},
		AppInfo: supertokens.AppInfo{
            AppName: "^{form_appName}",
            APIDomain: "^{form_apiDomain}",
            WebsiteDomain: "^{form_websiteDomain}",
            APIBasePath: &apiBasePath,
            WebsiteBasePath: &websiteBasePath,
		},
		RecipeList: []supertokens.Recipe{
			thirdparty.Init(&tpmodels.TypeInput{ /*TODO: See next step*/ }),
			emailpassword.Init(nil),
			session.Init(nil), // initializes session features
		},
	})

	if err != nil {
		panic(err.Error())
	}
}
```
</TabItem>
<TabItem value="python">
<PythonFrameworkSubTabs>
<TabItem value="fastapi">

```python
from supertokens_python import init, InputAppInfo, SupertokensConfig
from supertokens_python.recipe import thirdparty, emailpassword, session

init(
    app_info=InputAppInfo(
        app_name="^{form_appName}",
        api_domain="^{form_apiDomain}",
        website_domain="^{form_websiteDomain}",
        api_base_path="^{form_apiBasePath}",
        website_base_path="^{form_websiteBasePath}"
    ),
    supertokens_config=SupertokensConfig(
        ^{coreInjector_connection_uri_comment_with_hash}
        connection_uri=^{coreInjector_uri}
        ^{coreInjector_api_key_commented_with_hash}api_key=^{coreInjector_api_key}
    ),
    framework='fastapi',
    recipe_list=[
	    session.init(), # initializes session features
        thirdparty.init(
           # TODO: See next step
        ),
        emailpassword.init()
    ],
    mode='asgi' # use wsgi if you are running using gunicorn
)
```

</TabItem>
<TabItem value="flask">

```python
from supertokens_python import init, InputAppInfo, SupertokensConfig
from supertokens_python.recipe import thirdparty, emailpassword, session

init(
    app_info=InputAppInfo(
        app_name="^{form_appName}",
        api_domain="^{form_apiDomain}",
        website_domain="^{form_websiteDomain}",
        api_base_path="^{form_apiBasePath}",
        website_base_path="^{form_websiteBasePath}"
    ),
    supertokens_config=SupertokensConfig(
        ^{coreInjector_connection_uri_comment_with_hash}
        connection_uri=^{coreInjector_uri}
        ^{coreInjector_api_key_commented_with_hash}api_key=^{coreInjector_api_key}
    ),
    framework='flask',
    recipe_list=[
	    session.init(), # initializes session features
        thirdparty.init(
           # TODO: See next step
        ),
        emailpassword.init()
    ]
)
```

</TabItem>
<TabItem value="django">

```python
from supertokens_python import init, InputAppInfo, SupertokensConfig
from supertokens_python.recipe import thirdparty, emailpassword, session

init(
    app_info=InputAppInfo(
        app_name="^{form_appName}",
        api_domain="^{form_apiDomain}",
        website_domain="^{form_websiteDomain}",
        api_base_path="^{form_apiBasePath}",
        website_base_path="^{form_websiteBasePath}"
    ),
    supertokens_config=SupertokensConfig(
        ^{coreInjector_connection_uri_comment_with_hash}
        connection_uri=^{coreInjector_uri}
        ^{coreInjector_api_key_commented_with_hash}api_key=^{coreInjector_api_key}
    ),
    framework='django',
    recipe_list=[
	    session.init(), # initializes session features
        thirdparty.init(
           # TODO: See next step
        ),
        emailpassword.init()
    ],
    mode='asgi' # use wsgi if you are running django server in sync mode
)
```

</TabItem>
</PythonFrameworkSubTabs>
</TabItem>
</BackendSDKTabs>

</CoreInjector>

</AppInfoForm>

## 3) Initialise Social login providers

<AppInfoForm
    askForWebsiteDomain
    askForAPIDomain
>

Populate the `providers` array with the third party auth providers you want.

<BackendSDKTabs>
<TabItem value="nodejs">

```tsx
import SuperTokens from "supertokens-node";
import ThirdParty from "supertokens-node/recipe/thirdparty"
import EmailPassword from "supertokens-node/recipe/emailpassword"

SuperTokens.init({
    appInfo: {
        apiDomain: "...",
        appName: "...",
        websiteDomain: "...",
    },
    recipeList: [
        EmailPassword.init(),
        ThirdParty.init({
            //highlight-start
            // We have provided you with development keys which you can use for testing.
            // IMPORTANT: Please replace them with your own OAuth keys for production use.
            signInAndUpFeature: {
                providers: [{
                    config: {
                        thirdPartyId: "google",
                        clients: [{
                            clientId: "1060725074195-kmeum4crr01uirfl2op9kd5acmi9jutn.apps.googleusercontent.com",
                            clientSecret: "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"
                        }]
                    }
                }, {
                    config: {
                        thirdPartyId: "github",
                        clients: [{
                            clientId: "467101b197249757c71f",
                            clientSecret: "e97051221f4b6426e8fe8d51486396703012f5bd"
                        }]
                    }
                }, {
                    config: {
                        thirdPartyId: "apple",
                        clients: [{
                            clientId: "4398792-io.supertokens.example.service",
                            additionalConfig: {
                                keyId: "7M48Y4RYDL",
                                privateKey:
                                    "-----BEGIN PRIVATE KEY-----\nMIGTAgEAMBMGByqGSM49AgEGCCqGSM49AwEHBHkwdwIBAQQgu8gXs+XYkqXD6Ala9Sf/iJXzhbwcoG5dMh1OonpdJUmgCgYIKoZIzj0DAQehRANCAASfrvlFbFCYqn3I2zeknYXLwtH30JuOKestDbSfZYxZNMqhF/OzdZFTV0zc5u5s3eN+oCWbnvl0hM+9IW0UlkdA\n-----END PRIVATE KEY-----",
                                teamId: "YWQCXGJRJL",
                            }
                        }]
                    }
                }],
            }
            //highlight-end
        }),
        // ...
    ]
});
```
</TabItem>
<TabItem value="go">

```go
import (
	"github.com/supertokens/supertokens-golang/recipe/thirdparty"
	"github.com/supertokens/supertokens-golang/recipe/thirdparty/tpmodels"
)

func main() {

	// Inside supertokens.Init -> RecipeList
	thirdparty.Init(&tpmodels.TypeInput{
		// highlight-start
		SignInAndUpFeature: tpmodels.TypeInputSignInAndUp{
			Providers: []tpmodels.ProviderInput{
				// We have provided you with development keys which you can use for testing.
				// IMPORTANT: Please replace them with your own OAuth keys for production use.
				{
					Config: tpmodels.ProviderConfig{
						ThirdPartyId: "google",
						Clients: []tpmodels.ProviderClientConfig{
							{
								ClientID:     "1060725074195-kmeum4crr01uirfl2op9kd5acmi9jutn.apps.googleusercontent.com",
								ClientSecret: "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",
							},
						},
					},
				},
				{
					Config: tpmodels.ProviderConfig{
						ThirdPartyId: "github",
						Clients: []tpmodels.ProviderClientConfig{
							{
								ClientID:     "467101b197249757c71f",
								ClientSecret: "e97051221f4b6426e8fe8d51486396703012f5bd",
							},
						},
					},
				},
				{
					Config: tpmodels.ProviderConfig{
						ThirdPartyId: "apple",
						Clients: []tpmodels.ProviderClientConfig{
							{
								ClientID: "4398792-io.supertokens.example.service",
								AdditionalConfig: map[string]interface{}{
									"keyId":      "7M48Y4RYDL",
									"privateKey": "-----BEGIN PRIVATE KEY-----\nMIGTAgEAMBMGByqGSM49AgEGCCqGSM49AwEHBHkwdwIBAQQgu8gXs+XYkqXD6Ala9Sf/iJXzhbwcoG5dMh1OonpdJUmgCgYIKoZIzj0DAQehRANCAASfrvlFbFCYqn3I2zeknYXLwtH30JuOKestDbSfZYxZNMqhF/OzdZFTV0zc5u5s3eN+oCWbnvl0hM+9IW0UlkdA\n-----END PRIVATE KEY-----",
									"teamId":     "YWQCXGJRJL",
								},
							},
						},
					},
				},
			},
		},
		// highlight-end
	})
}
```
</TabItem>
<TabItem value="python">

```python
from supertokens_python.recipe.thirdparty.provider import ProviderInput, ProviderConfig, ProviderClientConfig
from supertokens_python.recipe import thirdparty

# Inside init
thirdparty.init(
    # highlight-start
    sign_in_and_up_feature=thirdparty.SignInAndUpFeature(
        providers=[
            # We have provided you with development keys which you can use for testing.
            # IMPORTANT: Please replace them with your own OAuth keys for production use.
            ProviderInput(
                config=ProviderConfig(
                    third_party_id="google",
                    clients=[
                        ProviderClientConfig(
                            client_id="1060725074195-kmeum4crr01uirfl2op9kd5acmi9jutn.apps.googleusercontent.com",
                            client_secret="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",
                        ),
                    ],
                ),
            ),
            ProviderInput(
                config=ProviderConfig(
                    third_party_id="github",
                    clients=[
                        ProviderClientConfig(
                            client_id='467101b197249757c71f',
                            client_secret='e97051221f4b6426e8fe8d51486396703012f5bd'
                        ),
                    ],
                ),
            ),
            ProviderInput(
                config=ProviderConfig(
                    third_party_id="apple",
                    clients=[
                        ProviderClientConfig(
                            client_id="4398792-io.supertokens.example.service",
                            additional_config={
                                "keyId": "7M48Y4RYDL",
                                "privateKey": "-----BEGIN PRIVATE KEY-----\nMIGTAgEAMBMGByqGSM49AgEGCCqGSM49AwEHBHkwdwIBAQQgu8gXs+XYkqXD6Ala9Sf/iJXzhbwcoG5dMh1OonpdJUmgCgYIKoZIzj0DAQehRANCAASfrvlFbFCYqn3I2zeknYXLwtH30JuOKestDbSfZYxZNMqhF/OzdZFTV0zc5u5s3eN+oCWbnvl0hM+9IW0UlkdA\n-----END PRIVATE KEY-----",
                                "teamId": "YWQCXGJRJL"
                            },        
                        ),
                    ],
                ),
            ),
        ]
    )
    # highlight-end
)
```

</TabItem>
</BackendSDKTabs>

**When you want to generate your own keys**, please refer to the corresponding documentation to get your client ids and client secrets for each of the below providers:

<details>
<summary>Google</summary>

- Generate your client ID and secret by following the [docs here](https://support.google.com/cloud/answer/6158849?hl=en)
- Set the authorisation callback URL to `^{form_websiteDomain}^{form_websiteBasePathForCallbacks}/callback/google`

</details>

<details>
<summary>Github</summary>

- Generate your client ID and secret by following the [docs here](https://docs.github.com/en/developers/apps/creating-an-oauth-app)
- Set the authorisation callback URL to `^{form_websiteDomain}^{form_websiteBasePathForCallbacks}/callback/github`

</details>

<details>
<summary>Apple</summary>

- Generate your client ID and secret by following [this article](https://medium.com/identity-beyond-borders/how-to-configure-sign-in-with-apple-77c61e336003)
- Set the authorisation callback URL to `^{form_apiDomain}^{form_apiBasePathForCallbacks}/callback/apple`. Note that Apple doesn't allow `localhost` in the URL. So if you are in dev mode, you can use the dev keys we have provided above.

</details>

:::important
You can find the list of built in providers [here](../../common-customizations/signup-form/built-in-providers). To add a provider that is not listed, you can follow our guide on [setting up custom providers](../../common-customizations/signup-form/custom-providers).
:::

</AppInfoForm>


### 3. Add the SuperTokens APIs and Configure CORS

<!-- COPY SECTION -->
<!-- ./emailpassword/quickstart.mdx -->
<!-- 7 -->

Now that the SDK is initialized you need to expose the endpoints that will be used by the frontend SDKs.
Besides this, your server's CORS, Cross-Origin Resource Sharing, settings should be updated to allow the use of the authentication headers required by **SuperTokens**.

<AppInfoForm
    askForWebsiteDomain
    askForAPIBasePath
    hideWebsiteBasePathField
>

<BackendSDKTabs>
<TabItem value="nodejs">
<NodeJSFrameworkSubTabsServerless>
<TabItem value="express">

:::important
- Add the `middleware` BEFORE all your routes.
- Add the `cors` middleware BEFORE the SuperTokens middleware as shown below.
:::

```tsx
import express from "express";
import cors from "cors";
import supertokens from "supertokens-node";
import { middleware } from "supertokens-node/framework/express";

let app = express();

app.use(cors({
    // highlight-start
    origin: "^{form_websiteDomain}",
    allowedHeaders: ["content-type", ...supertokens.getAllCORSHeaders()],
    credentials: true,
    // highlight-end
}));

// IMPORTANT: CORS should be before the below line.
// highlight-next-line
app.use(middleware());

// ...your API routes
```

</TabItem>
<TabItem value="hapi">

Register the `plugin`.

```tsx
import Hapi from "@hapi/hapi";
import supertokens from "supertokens-node";
import { plugin } from "supertokens-node/framework/hapi";

let server = Hapi.server({
    port: 8000,
    routes: {
        // highlight-start
        cors: {
            origin: ["^{form_websiteDomain}"],
            additionalHeaders: [...supertokens.getAllCORSHeaders()],
            credentials: true,
        }
        // highlight-end
    }
});

(async () => {
    // highlight-next-line
    await server.register(plugin);

    await server.start();
})();

// ...your API routes
```

</TabItem>
<TabItem value="fastify">

Register the `plugin`. Also register [`@fastify/formbody`](https://github.com/fastify/fastify-formbody) plugin.

```tsx
import cors from "@fastify/cors";
import supertokens from "supertokens-node";
import { plugin } from "supertokens-node/framework/fastify";
import formDataPlugin from "@fastify/formbody";

import fastifyImport from "fastify";

let fastify = fastifyImport();

// ...other middlewares
// highlight-start
fastify.register(cors, {
    origin: "^{form_websiteDomain}",
    allowedHeaders: ['Content-Type', ...supertokens.getAllCORSHeaders()],
    credentials: true,
});
// highlight-end

(async () => {
    // highlight-next-line
    await fastify.register(formDataPlugin);
    // highlight-next-line
    await fastify.register(plugin);

    await fastify.listen(8000);
})();

// ...your API routes
```

</TabItem>
<TabItem value="koa">

:::important
Add the `middleware` BEFORE all your routes.
:::

```tsx
import Koa from "koa";
import cors from '@koa/cors';
import supertokens from "supertokens-node";
import { middleware } from "supertokens-node/framework/koa";

let app = new Koa();

app.use(cors({
	// highlight-start
    origin: "^{form_websiteDomain}",
    allowHeaders: ["content-type", ...supertokens.getAllCORSHeaders()],
    credentials: true,
    // highlight-end
}));

// highlight-next-line
app.use(middleware());

// ...your API routes
```

</TabItem>
<TabItem value="loopback">

:::important
Add the `middleware` BEFORE all your routes.
:::

```tsx
import { RestApplication } from "@loopback/rest";
import supertokens from "supertokens-node";
import { middleware } from "supertokens-node/framework/loopback";

let app = new RestApplication({
    rest: {
        cors: {
            // highlight-start
            origin: "^{form_websiteDomain}",
            allowedHeaders: ["content-type", ...supertokens.getAllCORSHeaders()],
            credentials: true
            // highlight-end
        }
    }
});

// highlight-next-line
app.middleware(middleware);

// ...your API routes
```

</TabItem>
</NodeJSFrameworkSubTabsServerless>
</TabItem>
<TabItem value="go">
<GoFrameworkSubTabs>
<TabItem value="http">

Use the `supertokens.Middleware` and the `supertokens.GetAllCORSHeaders()` functions as shown below.

```go
import (
	"net/http"
	"strings"

	"github.com/supertokens/supertokens-golang/supertokens"
)

func main() {
    // SuperTokens init...

    //highlight-start
	http.ListenAndServe("SERVER ADDRESS", corsMiddleware(
		supertokens.Middleware(http.HandlerFunc(func(rw http.ResponseWriter,
    //highlight-end
        r *http.Request) {
			// TODO: Handle your APIs..

		}))))
}

func corsMiddleware(next http.Handler) http.Handler {
	return http.HandlerFunc(func(response http.ResponseWriter, r *http.Request) {
		response.Header().Set("Access-Control-Allow-Origin", "^{form_websiteDomain}")
		response.Header().Set("Access-Control-Allow-Credentials", "true")
		if r.Method == "OPTIONS" {
			// we add content-type + other headers used by SuperTokens
			response.Header().Set("Access-Control-Allow-Headers",
				strings.Join(append([]string{"Content-Type"},
                //highlight-start
					supertokens.GetAllCORSHeaders()...), ","))
                //highlight-end
			response.Header().Set("Access-Control-Allow-Methods", "*")
			response.Write([]byte(""))
		} else {
			next.ServeHTTP(response, r)
		}
	})
}
```

</TabItem>
<TabItem value="gin">

Use the `supertokens.Middleware` and the `supertokens.GetAllCORSHeaders()` functions as shown below.

```go
import (
	"net/http"

	"github.com/gin-contrib/cors"
	"github.com/gin-gonic/gin"
	"github.com/supertokens/supertokens-golang/supertokens"
)

func main() {
    // SuperTokens init...

	router := gin.New()

	// CORS
	router.Use(cors.New(cors.Config{
		AllowOrigins: []string{"^{form_websiteDomain}"},
		AllowMethods: []string{"GET", "POST", "DELETE", "PUT", "OPTIONS"},
		AllowHeaders: append([]string{"content-type"},
        // highlight-next-line
			supertokens.GetAllCORSHeaders()...),
		AllowCredentials: true,
	}))

	// Adding the SuperTokens middleware
    // highlight-start
	router.Use(func(c *gin.Context) {
		supertokens.Middleware(http.HandlerFunc(
			func(rw http.ResponseWriter, r *http.Request) {
				c.Next()
			})).ServeHTTP(c.Writer, c.Request)
		// we call Abort so that the next handler in the chain is not called, unless we call Next explicitly
		c.Abort()
	})
    // highlight-end

	// Add APIs and start server
}
```

</TabItem>
<TabItem value="chi">

Use the `supertokens.Middleware` and the `supertokens.GetAllCORSHeaders()` functions as shown below.

```go
import (
	"github.com/go-chi/chi"
	"github.com/go-chi/cors"
	"github.com/supertokens/supertokens-golang/supertokens"
)

func main() {
    // SuperTokens init...

	r := chi.NewRouter()

	// CORS
	r.Use(cors.Handler(cors.Options{
		AllowedOrigins: []string{"^{form_websiteDomain}"},
		AllowedMethods: []string{"GET", "POST", "PUT", "DELETE", "OPTIONS"},
		AllowedHeaders: append([]string{"Content-Type"},
			//highlight-next-line
			supertokens.GetAllCORSHeaders()...),
		AllowCredentials: true,
	}))

	// SuperTokens Middleware
	//highlight-next-line
	r.Use(supertokens.Middleware)

	// Add APIs and start server
}
```
</TabItem>
<TabItem value="mux">

Use the `supertokens.Middleware` and the `supertokens.GetAllCORSHeaders()` functions as shown below.

```go
import (
	"net/http"

	"github.com/gorilla/handlers"
	"github.com/gorilla/mux"
	"github.com/supertokens/supertokens-golang/supertokens"
)

func main() {
	// SuperTokens init...

	// TODO: Add APIs

	router := mux.NewRouter()

	// Adding handlers.CORS(options)(supertokens.Middleware(router)))
	//highlight-start
	http.ListenAndServe("SERVER ADDRESS", handlers.CORS(
		handlers.AllowedHeaders(append([]string{"Content-Type"},
			supertokens.GetAllCORSHeaders()...)),
		handlers.AllowedMethods([]string{"GET", "POST", "PUT", "HEAD", "OPTIONS"}),
		handlers.AllowedOrigins([]string{"^{form_websiteDomain}"}),
		handlers.AllowCredentials(),
	)(supertokens.Middleware(router)))
	//highlight-end
}
```
</TabItem>
</GoFrameworkSubTabs>


</TabItem>
<TabItem value="python">
<PythonFrameworkSubTabs>
<TabItem value="fastapi">

Use the `Middleware` (**BEFORE all your routes**) and the `get_all_cors_headers()` functions as shown below.

```python
from supertokens_python import get_all_cors_headers
from fastapi import FastAPI
from starlette.middleware.cors import CORSMiddleware
from supertokens_python.framework.fastapi import get_middleware

app = FastAPI()
# highlight-next-line
app.add_middleware(get_middleware())

# TODO: Add APIs

app.add_middleware(
    CORSMiddleware,
    allow_origins=[
        "^{form_websiteDomain}"
    ],
    allow_credentials=True,
    allow_methods=["GET", "PUT", "POST", "DELETE", "OPTIONS", "PATCH"],
	# highlight-next-line
    allow_headers=["Content-Type"] + get_all_cors_headers(),
)

# TODO: start server
```

</TabItem>
<TabItem value="flask">

- Use the `Middleware` (**BEFORE all your routes and after calling init function**) and the `get_all_cors_headers()` functions as shown below.
- Add a route to catch all paths and return a 404. This is needed because if we don't add this, then OPTIONS request for the APIs exposed by the `Middleware` will return a `404`.

```python
from supertokens_python import get_all_cors_headers
from flask import Flask, abort
from flask_cors import CORS # type: ignore
from supertokens_python.framework.flask import Middleware

app = Flask(__name__)
# highlight-next-line
Middleware(app)

# TODO: Add APIs

CORS(
    app=app,
    origins=[
        "^{form_websiteDomain}"
    ],
    supports_credentials=True,
	# highlight-next-line
    allow_headers=["Content-Type"] + get_all_cors_headers(),
)

# This is required since if this is not there, then OPTIONS requests for
# the APIs exposed by the supertokens' Middleware will return a 404
# highlight-start
@app.route('/', defaults={'u_path': ''})  # type: ignore
@app.route('/<path:u_path>')  # type: ignore
def catch_all(u_path: str):
    abort(404)
# highlight-end

# TODO: start server
```

</TabItem>
<TabItem value="django">

Use the `Middleware` and the `get_all_cors_headers()` functions as shown below in your `settings.py`.

```python
from supertokens_python import get_all_cors_headers
from typing import List
from corsheaders.defaults import default_headers

CORS_ORIGIN_WHITELIST = [
    "^{form_websiteDomain}"
]

CORS_ALLOW_CREDENTIALS = True

CORS_ALLOWED_ORIGINS = [
    "^{form_websiteDomain}"
]

CORS_ALLOW_HEADERS: List[str] = list(default_headers) + [
    "Content-Type"
    # highlight-next-line
] + get_all_cors_headers()

INSTALLED_APPS = [
    'corsheaders',
    'supertokens_python'
]

MIDDLEWARE = [
    'corsheaders.middleware.CorsMiddleware',
    ...,
    # highlight-next-line
    'supertokens_python.framework.django.django_middleware.middleware',
]
# TODO: start server
```

</TabItem>
</PythonFrameworkSubTabs>


</TabItem>


</BackendSDKTabs>


You can review all the endpoints that are added through the use of **SuperTokens** by visiting the [API Specs](https://app.swaggerhub.com/apis/supertokens/FDI).

</AppInfoForm>

<!-- END COPY SECTION -->

### 4. Add the SuperTokens Error Handler

<!-- COPY SECTION -->
<!-- ./emailpassword/quickstart.mdx -->
<!-- 8 -->


Depending on the language and framework that you are using, you might need to add a custom error handler to your server.
The handler will catch all the authentication related errors and return proper HTTP responses that can be parsed by the frontend SDKs.

<BackendSDKTabs>
<TabItem value="nodejs">
<NodeJSFrameworkSubTabsServerless>
<TabItem value="express">

```tsx
import express, { Request, Response, NextFunction } from 'express';
import { errorHandler } from "supertokens-node/framework/express";

let app = express();

// ...your API routes

// highlight-start
// Add this AFTER all your routes
app.use(errorHandler())
// highlight-end

// your own error handler
app.use((err: unknown, req: Request, res: Response, next: NextFunction) => { /* ... */ });
```
</TabItem>
<TabItem value="hapi">

No additional `errorHandler` is required.

</TabItem>
<TabItem value="fastify">

Add the `errorHandler` **Before all your routes and plugin registration**

```tsx
import Fastify from "fastify";
import { errorHandler } from "supertokens-node/framework/fastify";

let fastify = Fastify();

// highlight-next-line
fastify.setErrorHandler(errorHandler());

// ...your API routes
```
</TabItem>
<TabItem value="koa">

No additional `errorHandler` is required.

</TabItem>
<TabItem value="loopback">

No additional `errorHandler` is required.

</TabItem>
</NodeJSFrameworkSubTabsServerless>
</TabItem>
<TabItem value="go">

:::info
You can skip this step
:::

</TabItem>
<TabItem value="python">

:::info
You can skip this step
:::

</TabItem>
</BackendSDKTabs>

<!-- END COPY SECTION -->

## Part 3: Secure Application Routes

<!-- COPY SECTION -->
<!-- ./emailpassword/quickstart.mdx -->
<!-- 9 -->


Now that your server can authenticate users, the final step that you need to take care of is to prevent unauthorized access to certain parts of the application.

### Protect Frontend Routes

<FrontendPreBuiltUITabs>
<TabItem value="reactjs">

You can wrap your components with the `<SessionAuth>` react component. This will ensure that your component renders only if the user is logged in. If they are not logged in, the user will be redirected to the login page.

```tsx 
import React from "react";
import {
    BrowserRouter,
    Routes,
    Route,
} from "react-router-dom";
// highlight-next-line 
import { SessionAuth } from "supertokens-auth-react/recipe/session";
// @ts-ignore
import MyDashboardComponent from "./dashboard";

class App extends React.Component {
    render() {
        return (
            <BrowserRouter>
                <Routes>
                    <Route path="/dashboard" element={
                        // highlight-start
                        <SessionAuth>
                            {/*Components that require to be protected by authentication*/}
                            <MyDashboardComponent />
                        </SessionAuth>
                        // highlight-end
                    } />
                </Routes>
            </BrowserRouter>
        );
    }
}
```

</TabItem>

<TabItem value="angular">

You can use the `doesSessionExist` function to check if a session exists in all your routes.

```tsx
import Session from 'supertokens-web-js/recipe/session';

async function doesSessionExist() {
      if (await Session.doesSessionExist()) {
            // user is logged in
      } else {
            // user has not logged in yet
      }
}
```

</TabItem>

</FrontendPreBuiltUITabs>

### Protect Backend Endpoints

For your APIs that require a user to be logged in, use the `verifySession` middleware

<BackendSDKTabs>
<TabItem value="nodejs">

<NodeJSFrameworkSubTabsServerless>

<TabItem value="express">

```tsx
import express from "express";
import { verifySession } from "supertokens-node/recipe/session/framework/express";
import { SessionRequest } from "supertokens-node/framework/express";

let app = express();

// highlight-start
app.post("/like-comment", verifySession(), (req: SessionRequest, res) => {
    let userId = req.session!.getUserId();
    // highlight-end
    //....
});
```

</TabItem>
<TabItem value="hapi">

```tsx
import Hapi from "@hapi/hapi";
import { verifySession } from "supertokens-node/recipe/session/framework/hapi";
import { SessionRequest } from "supertokens-node/framework/hapi";

let server = Hapi.server({ port: 8000 });

server.route({
    path: "/like-comment",
    method: "post",
    //highlight-start
    options: {
        pre: [
            {
                method: verifySession()
            },
        ],
    },
    handler: async (req: SessionRequest, res) => {
        let userId = req.session!.getUserId();
        //highlight-end
        //...
    }
})
```
</TabItem>
<TabItem value="fastify">

```tsx
import Fastify from "fastify";
import { verifySession } from "supertokens-node/recipe/session/framework/fastify";
import { SessionRequest } from "supertokens-node/framework/fastify";

let fastify = Fastify();

//highlight-start
fastify.post("/like-comment", {
    preHandler: verifySession(),
}, (req: SessionRequest, res) => {
    let userId = req.session!.getUserId();
    //highlight-end
    //....
});
```

</TabItem>
<TabItem value="koa">

```tsx
import KoaRouter from "koa-router";
import { verifySession } from "supertokens-node/recipe/session/framework/koa";
import { SessionContext } from "supertokens-node/framework/koa";

let router = new KoaRouter();

//highlight-start
router.post("/like-comment", verifySession(), (ctx: SessionContext, next) => {
    let userId = ctx.session!.getUserId();
    //highlight-end
    //....
});
```

</TabItem>
<TabItem value="loopback">

```tsx
import { inject, intercept } from "@loopback/core";
import { RestBindings, MiddlewareContext, post, response } from "@loopback/rest";
import { verifySession } from "supertokens-node/recipe/session/framework/loopback";
import { SessionContext } from "supertokens-node/framework/loopback";

class LikeComment {
    //highlight-start
    constructor(@inject(RestBindings.Http.CONTEXT) private ctx: MiddlewareContext) { }
    @post("/like-comment")
    @intercept(verifySession())
    @response(200)
    handler() {
        let userId = (this.ctx as SessionContext).session!.getUserId();
        //highlight-end
        //....
    }
}
```

</TabItem>
</NodeJSFrameworkSubTabsServerless>
</TabItem>
<TabItem value="go">
<GoFrameworkSubTabs>
<TabItem value="http">

```go
import (
	"fmt"
	"net/http"

	"github.com/supertokens/supertokens-golang/recipe/session"
)

func main() {
	_ = http.HandlerFunc(func(rw http.ResponseWriter, r *http.Request) {
		// Wrap the API handler in session.VerifySession
		session.VerifySession(nil, likeCommentAPI).ServeHTTP(rw, r)
	})
}

func likeCommentAPI(w http.ResponseWriter, r *http.Request) {
	// retrieve the session object as shown below
	sessionContainer := session.GetSessionFromRequestContext(r.Context())

	userID := sessionContainer.GetUserID()

	fmt.Println(userID)
}
```

</TabItem>
<TabItem value="gin">

```go
import (
	"fmt"
	"net/http"

	"github.com/gin-gonic/gin"
	"github.com/supertokens/supertokens-golang/recipe/session"
	"github.com/supertokens/supertokens-golang/recipe/session/sessmodels"
)

func main() {
	router := gin.New()

	// Wrap the API handler in session.VerifySession
	router.POST("/likecomment", verifySession(nil), likeCommentAPI)
}

// This is a function that wraps the supertokens verification function
// to work the gin
func verifySession(options *sessmodels.VerifySessionOptions) gin.HandlerFunc {
	return func(c *gin.Context) {
		session.VerifySession(options, func(rw http.ResponseWriter, r *http.Request) {
			c.Request = c.Request.WithContext(r.Context())
			c.Next()
		})(c.Writer, c.Request)
		// we call Abort so that the next handler in the chain is not called, unless we call Next explicitly
		c.Abort()
	}
}

func likeCommentAPI(c *gin.Context) {
	// retrieve the session object as shown below
	sessionContainer := session.GetSessionFromRequestContext(c.Request.Context())

	userID := sessionContainer.GetUserID()

	fmt.Println(userID)
}
```

</TabItem>
<TabItem value="chi">

```go
import (
	"fmt"
	"net/http"

	"github.com/go-chi/chi"
	"github.com/supertokens/supertokens-golang/recipe/session"
)

func main() {
	r := chi.NewRouter()

	// Wrap the API handler in session.VerifySession
	r.Post("/likecomment", session.VerifySession(nil, likeCommentAPI))
}

func likeCommentAPI(w http.ResponseWriter, r *http.Request) {
	// retrieve the session object as shown below
	sessionContainer := session.GetSessionFromRequestContext(r.Context())

	userID := sessionContainer.GetUserID()

	fmt.Println(userID)
}
```

</TabItem>
<TabItem value="mux">

```go
import (
	"fmt"
	"net/http"

	"github.com/gorilla/mux"
	"github.com/supertokens/supertokens-golang/recipe/session"
)

func main() {
	router := mux.NewRouter()

	// Wrap the API handler in session.VerifySession
	router.HandleFunc("/likecomment", session.VerifySession(nil, likeCommentAPI)).Methods(http.MethodPost)
}

func likeCommentAPI(w http.ResponseWriter, r *http.Request) {
	// retrieve the session object as shown below
	sessionContainer := session.GetSessionFromRequestContext(r.Context())

	userID := sessionContainer.GetUserID()

	fmt.Println(userID)
}
```

</TabItem>
</GoFrameworkSubTabs>
</TabItem>
<TabItem value="python">

<PythonFrameworkSubTabs>
<TabItem value="fastapi">

```python
from supertokens_python.recipe.session.framework.fastapi import verify_session
from supertokens_python.recipe.session import SessionContainer
from fastapi import Depends

# highlight-start
@app.post('/like_comment') # type: ignore
async def like_comment(session: SessionContainer = Depends(verify_session())):
    user_id = session.get_user_id()
    # highlight-end

    print(user_id)
```

</TabItem>
<TabItem value="flask">

```python
from supertokens_python.recipe.session.framework.flask import verify_session
from supertokens_python.recipe.session import SessionContainer
from flask import g

# highlight-start
@app.route('/update-jwt', methods=['POST']) # type: ignore
@verify_session()
def like_comment():
    session: SessionContainer = g.supertokens # type: ignore

    user_id = session.get_user_id()
    # highlight-end

    print(user_id)
```

</TabItem>
<TabItem value="django">

```python
from supertokens_python.recipe.session.framework.django.asyncio import verify_session
from django.http import HttpRequest
from supertokens_python.recipe.session import SessionContainer

# highlight-start
@verify_session()
async def like_comment(request: HttpRequest):
    session: SessionContainer = request.supertokens # type: ignore

    user_id = session.get_user_id()
    # highlight-end
    
    print(user_id)
```

</TabItem>
</PythonFrameworkSubTabs>

</TabItem>
</BackendSDKTabs>

The `verifySession` function returns a `401` to the frontend if a session doesn't exist, or if the access token has expired, in which case, our frontend SDK automatically refreshes the session.

In case of successful session verification, you get access to a `session` object using which you can get the user's ID, or manipulate the session information.

<!-- END COPY SECTION -->

## Next Steps

To add extra functionalities to the basic flow that you have built check out the following guides: 

- [Add a Sign Out Action](./pre-built-ui/sign-out)
- [Add Email Verification](./common-customizations/email-verification/about)
- [Add a Custom Redirect Action after login](./pre-built-ui/auth-redirection)
- [Implement your own Custom UI](./custom-ui/init/frontend)
- [Connect to the SuperTokens Core Managed Service](./pre-built-ui/setup/core/saas-setup)


You can also explore higher level features that extend the authentication implementation:

- [Migrate from an existing auth provider](./migration/about)
- [Add Multi Factor Authentication](./mfa)
- [Manage users through the User Management Dashboard](./pre-built-ui/setup/user-management-dashboard/setup)
- [Implement Multi Tenancy](./multi-tenant)
- [Self Host SuperTokens Core](./pre-built-ui/setup/core/with-docker)


